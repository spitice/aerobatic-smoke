
# Aerobatic Smoke for MSFS

![logo](doc/images/aerobatic-smoke.jpg)

----

MSFS 編隊アクロ用スモーク v1.7.1 (24-09-04)

----

編隊アクロに適した軽量なスモークを以下の機体に追加します：

- IndiaFoxtEcho MB-339
- DC Designs F-4（白スモークのみ）

追加されたスモークは特定のライトをON/OFFすることで使用出来ます。

| 色   | ライト名                  | 日本語     |
| --- | --------------------- | ------- |
| ⚪白  | **LOGO** LIGHT        | **ロゴ灯** |
| 🔴赤 | **RECOGNITION** LIGHT | **識別灯** |
| 🟢緑 | **WING** LIGHT        | **翼端灯** |
| 🟡黄 | RECOG + WING          | 識別灯+翼端灯 |


各ライトの操作はMSFSのキーバインドによって行ってください。

LOGOライトがONになっている場合、他のライトの状態に関わらず白のスモークが表示されます。


## インストール方法

zz-spitice-aerobatic-smoke をコミュニティフォルダにインストール

## MB-339 (IndiaFoxtEcho)

ライトの操作でスモークが表示されるようになります。

MB-339PANに搭載されている左手前コンソールSMOKE関連のスイッチは、本MODにより無効化されています。

オリジナルではそれぞれ

- WINGライト → 白のスモーク
- RECOGNITIONライト → カラースモーク

に対応していましたが、本MODではPAN以外も含めた全機種にて、白・カラースモークが使用可能です。

| 色   | ライト名                  | 日本語     |
| --- | --------------------- | ------- |
| ⚪白  | **LOGO** LIGHT        | **ロゴ灯** |
| 🔴赤 | **RECOGNITION** LIGHT | **識別灯** |
| 🟢緑 | **WING** LIGHT        | **翼端灯** |
| 🟡黄 | RECOG + WING          | 識別灯+翼端灯 |

オリジナルのスモークは重複表示を防止するため無効化されています。（F-4と同様）

## F-4 (DC Designs)

F-4はDCDのアプデ(23-08-04)により、WINGライト（右コンソールから操作可能）でスモークを使用することが可能になりました。
しかし、DCD製のスモークは表示時間が短く負荷も比較的高いため、本MODはそれを無効化しています。

本MODを導入した場合、スモークのON/OFFについては**LOGOライト**を使用してください。


## スモークシステムサウンド

v1.5.0より、スモーク操作を行った際、またはスモークを使用し続けている場合にサウンドエフェクトが発生するようになりました。

| 操作                 | サウンド        |
| ------------------ | ----------- |
| スモークON時            | 長めのビープ音     |
| スモークOFF時           | 短めのビープ音2回   |
| スモークONのまま色変更ボタンを操作 | 短めのビープ音     |
| スモークONの状態で5秒毎      | カッコン（クリック）音 |

スモークサウンドのアイデアについては、フライトシミュレーターDigital Combat Simulator（DCS World）にて活躍されており、世界トップクラスのバーチャルアクロチームである Virtual Blue Impulse（VBI）様より拝借しています。本スモークMODでそちらを模倣することについてご快諾して頂いたVBI隊長Tink様、そしてVBI様のご活躍をサポートされているメンバーの方々に御礼申し上げます。

## Surf Overlay (海上に点を表示)

v1.6.0より、簡易的な海面表示オーバーレイを追加され、特定の条件下で海上に点が表示されるようになりました。

このオーバーレイは、

- ギアが上がっている
- 風が2knots以下

の時に表示され、海面が見えにくい無風設定で飛行する時に役立ちます。

グリッドは3種類あり、それぞれ25m/125m/725mの間隔で点が配置されています。
また、最も内側のグリッドは低高度になるにつれ色及びサイズが変化します。


## HUDシステム

v1.7.0より、MB-339にHUD+HMDが追加されました。
編隊飛行に便利な様々な数値が表示されるようになります。

[HUDテストページ](https://spitice.github.io/msfs/hud/) (Chromeのみで動作確認。FireFox非対応)

### HUD/HMDのON/OFF

HUDプレートの下にあるコネクタ端子のような部分をクリックすることで、HUD/HMDの表示・非表示を切り替えることが可能です。

HUD ON（デフォルト） → HUD/HMD ON → HMD ON → OFF → HUD ON...

初期状態ではHUDのみONになっています。

HMDについては、ONである状態で且つ

- 画面をズームアウトしている（約30%）
- 画面がズームアウトしていないが、HUD及び正面計器"以外"の方向を向いている

場合のみ表示されます。

v1.7.0時点では設定保存機能はありません。（次バージョンで搭載予定）

## バージョンごとの相違

v1.2.2以降のAerobatic Smokeはマルチ上で互換性があります。
v1.7.0現在、スモーク以外の追加表示機能のON/OFFが出来ないため、不必要な機能がある場合は互換性の有る古いバージョンを代わりに使用してください。

| 機能                 | v1.2.2 | v1.3 | v1.4 | v1.5 | v1.6 | v1.7  |
| ------------------ | ------ | ---- | ---- | ---- | ---- | ----- |
| スモーク               | ✅      | ✅    | ✅    | ✅    | ✅    | ✅     |
| リングFX              | -      | ✅    | ✅    | ✅    | ✅    | ✅     |
| アンテナ部分ミニリングFX      | -      | -    | ✅    | ✅    | ✅    | ✅     |
| スモークサウンド           | -      | -    | -    | ✅    | ✅    | ✅     |
| Surf Overlay（海面FX） | -      | -    | -    | -    | ✅    | オプション |
| HUD/HMD            | -      | -    | -    | -    | -    | ✅     |
| 新スモークインジケータ        | -      | -    | -    | -    | -    | ✅     |

## 既知の不具合

- v1.7.0: スモークインジケーターがキャノピー開閉に連動してアニメーションしない



## フォントについて

HUDのフォントには[HORNET DISPLAY](https://github.com/0x408/hornet-display/)（[LICENSE](https://spitice.github.io/msfs/hud/fonts/HornetDisplay_LICENSE.txt)）を使用しています

## 連絡先

質問やご意見等があればお気軽に Spitice までご連絡ください

X(Twitter) @spitice0 / Discord spitice


## 更新履歴

#### v1.7.1 (24-09-04)

- HUD/HMDそれぞれの表示・非表示設定機能を追加
- Cold&Darkスタート時にHUD/HMDが表示されない不具合を修正
- SurfOverlay（海面表示FX）をデフォルトで無効化（オプションで復活可能）

#### v1.7.0 (24-09-01)

- HUD+HMDを追加
- スモークインジケーターを追加

#### v1.6.0 (24-07-20)

- 海面を見やすくする機能「Surf Overlay」を追加

#### v1.5.0 (24-06-21)

- スモーク操作時、スモーク使用中5秒毎に鳴るサウンドエフェクトを追加
- Ripple VFX（他機スモークON時に発生するリングエフェクト）を少しだけ軽量化
- DCD F4にてドラッグシュートが表示されなくなる問題を修正

#### v1.4.0 (24-05-22)

- 機体後方のアンテナ上部付近にスモーク色のインジケーターを追加（コックピット視点でのみ有効。他の視点に切り替えてから5秒で表示されなくなります）
- 影がぼやけてしまっていた問題を修正
- リング状エフェクトの発生位置を前方へ移動
- カラースモークの発生位置が横方向にズレてしまっていた問題を修正

#### v1.3.0 (24-04-21)

- Smoke ON のタイミングでリング状のエフェクトが表示されるように（コックピット視点でのみ有効。他の視点に切り替えてから5秒で表示されなくなります）
- Smokeエフェクトが更新される距離が上昇（約3km→10km）
- スモーク噴射直後のスモークの太さを調整し、より見やすくなるようにした

#### v1.2.2 Xmas 2023 (23-12-22)

- Xmas 2023 特別バージョン

#### v1.2.2 (23-12-11)

- 編隊灯がスモークの状態と連動しなくなっていた問題を修正

#### v1.2.1 (23-12-10)

- スモークが近距離（500m）だけではなく遠距離（10km）でも同期されるように
- スモーク処理を改善し、フライトモデルをオリジナルへ完全にロールバックした

#### v1.2.0 (23-12-08)

- スモークをONにした時に余計なドラッグが増えフライトモデルに影響が出ていた問題を修正
- カラースモーク（赤・緑・黄）を追加
- [MB-339] cruise.fltを修正し、空中スポーンした際にWINGライトがOFFになるように
- [MB-339] 編隊灯をスモークの状態と連動するように
- [MB-339] 少しだけスモーク発生位置を前に移動

#### v1.1.1 (23-12-07)

- SU14によってスモークが同期しなくなった問題を修正（MB-339のみ）

#### v1.1.0 (23-08-05)

- IndiaFoxtEcho MB-339 用スモークを追加
- DC Designs F-4 v0.1.1 (23-08-04) に対応
- F-4 の照準器にSMOKEの状態を表示するように
- スモークの見た目を調整し、少し太く見やすくした
- High-Gターン時に発生するスモークのズレをマイルドにした
- 低速時・停止時にスモークが残りやすくなるように

#### v1.0.0 (23-07-22)

- 最初のバージョン🎉🎉
- DC Designs F-4 用スモークを追加
